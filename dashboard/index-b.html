<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard â€“ New Theme</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Flowbite -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- PapaParse -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

  <style>
    body { font-family: Inter, system-ui, sans-serif; }

    .table-wrapper {
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(8px);
        border-radius: 1rem;
        padding: 1rem;
        border: 1px solid rgba(255,255,255,0.4);
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        overflow: hidden; 
    }

    /* Base Table */
    .excel-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem; 
        color: #0f172a;
        border-radius: 0.75rem; 
        overflow: hidden;     
    }

    /* Header */
    .excel-table thead th {
        background-color: #004c99;
        color: white;
        padding: 7px 7px;
        font-weight: 600;
        text-align: center;
        white-space: nowrap;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 20;
        box-shadow: inset 0 -1px 0 rgba(255,255,255,0.2);
    }

    /* Cell Base */
    .excel-table td {
        padding: 6px 7px;
        border-bottom: 1px solid #e5e7eb;
        background: rgba(255,255,255,0.6);
    }

    /* Flowbite zebra rows */
    .excel-table tbody tr:nth-child(even) {
        background-color: #f9fafb;
    }

    /* Hover Row */
    .excel-table tbody tr:hover {
        background-color: #f1f5f9;
    }

    /* Zone Cell */
    .excel-table td.zone {
        text-align: left;
        font-weight: 600;
        color: #004c99;
    }

    /* Rank Cell */
    .excel-table td.rank {
        text-align: center;
        background-color: #f3f4f6;
        font-weight: 700;
    }

    /* Muted Cell */
    .excel-table td.muted {
        color: #94a3b8;
    }

    /* Specialized Rows */
    .excel-table tr.row-unique {
        background: rgba(255,255,255,0.85);
        color: #475569;
    }

    .excel-table tr.grand {
        background-color: #fff7cc;
        color: #7a5e00;
        font-weight: 700;
    }

    .excel-table tr.repeat {
        background-color: #e0f7ff;
        color: #0c5460;
        font-weight: 600;
    }

    .col-base-pct {
        min-width: 65px;
        max-width: 65px;
        text-align: center;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    /* Chip Section Title */
    .slicer-title {
        font-weight: 700;
        color: #004c99;
        margin-bottom: 6px;
        border-bottom: 2px solid rgba(255,255,255,0.6);
        padding-bottom: 3px;
    }

    /* Chip Container */
    .slicer-grid,
    .reason-list {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        max-height: 500px;
        overflow-y: auto;
        padding: 4px;
    }

    /* Base Chip */
    .chip {
        display: inline-flex;
        align-items: center;

        padding: 2px 6px;              
        font-size: 0.85rem;            
        font-weight: 500;

        border-radius: 6px;            
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;

        background-color: #eef2ff;     
        color: #4338ca;                
        border: 1px solid rgba(67, 56, 202, 0.15);  

        box-shadow: inset 0 0 0 1px rgba(67,56,202,0.10);
    }

    /* OFF state */
    .chip.off {
        background-color: #f8f9fd;
        color: #64748b;
        border-color: rgba(0,0,0,0.08);
        box-shadow: none;
    }

    .chip.selected {
        background-color: #4f46e5;   
        color: white;
        border: 1px solid #4338ca;   
        font-weight: 600;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    .chip:hover:not(.selected) {
        background-color: #e0e7ff;     
        border-color: rgba(67, 56, 202, 0.25);
    }

    #zoneChips .chip,
    #regionChips .chip {
        padding: 0.4rem 0.7rem; 
        font-size: 0.80rem;      
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 80px;  
    }

    .filter-btn,
    .filter-input {
        font-size: 0.80rem;                  /* similar to chips */
        padding: 4px 12px;                   /* chip-like padding */
        border-radius: 999px;                /* fully rounded */
        border: 1px solid rgba(0,0,0,0.12);
        background: rgba(255,255,255,0.7);
        color: #004c99;
        backdrop-filter: blur(6px);
        transition: 0.2s ease;
    }

    /* Buttons (special) */
    .filter-btn {
        background-color: #004c99;
        color: white;
        font-weight: 600;
    }

    .filter-btn:hover {
        background-color: #0066cc;
    }

    /* Input styling */
    .filter-input {
        background-color: rgba(255,255,255,0.9);
    }

    .filter-input:focus {
        outline: none;
        border-color: #004c99;
        box-shadow: 0 0 0 2px rgba(0,76,153,0.25);
    }

  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-[#d9e4f5] to-[#f3f8ff] text-[#0f1724] p-6">

  <div class="max-w-[1600px] mx-auto">

    <div class="text-2xl font-bold tracking-wide">
        Call Analytics
    </div>
    <div class="text-gray-600 text-sm pb-4">
        Overview: <strong id="statusText">Initializing...</strong>
    </div>

    <!-- REGION SECTION -->
        <section class="mb-10 border-b border-white/40">

                <header class="sticky top-0 z-50 bg-white/30 backdrop-blur-xl border border-white/40 shadow-lg rounded-2xl p-5 mb-8">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <h2 class="text-xl font-bold text-[#004c99]">Call Volume by Region</h2>

                            <div class="flex flex-wrap items-center gap-3">
                                <!-- Region Chips -->
                                <div class="flex flex-wrap gap-2" id="regionChips"></div>

                                <!-- Filters -->
                                <button id="clearFiltersBtn" class="filter-btn">Clear Filters</button>

                                <input type="text" 
                                    id="mainDateRange" 
                                    placeholder="Select Date Range" 
                                    class="filter-input" />

                                <button id="clearMainDateBtn" class="filter-btn">Clear</button>
                            </div>

                    </div>
                </header>      

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <div class="col-span-3 space-y-6">
                <div id="summaryTableContainer" class="bg-white/70 p-6 rounded-xl shadow">
                    <p class="text-center text-gray-600">Loading summary data...</p>
                </div>

                <div class="bg-white/70 p-6 rounded-xl shadow h-80 flex items-center justify-center">
                    <canvas id="barChart"></canvas>
                </div>

                <div id="quickStats" class="flex gap-6 text-sm text-gray-700"></div>
                </div>

                <div class="space-y-6 sticky top-24 self-start">
                    <div class="bg-white/70 p-5 rounded-xl shadow">
                        <h3 class="font-bold text-[#004c99] mb-3">Call Reason</h3>
                        <div id="reasonChips" class="flex flex-wrap gap-2 max-h-[500px] overflow-y-auto"></div>
                    </div>
                </div>

            </div>

        </section>



    <!-- URBAN ZONE SECTION -->
    <section class="mb-10 border-b border-white/40">
        <header class="sticky top-0 z-50 bg-white/30 backdrop-blur-xl border border-white/40 shadow-lg rounded-2xl p-5 mb-8">
        <div class="flex flex-wrap items-center justify-between gap-4">
            <h2 class="text-xl font-bold text-[#004c99]">Urban Zone Analysis</h2>

            <div class="flex flex-wrap items-center gap-3">
                <!-- Zone Chips -->
                <div class="flex flex-wrap gap-2" id="zoneChips"></div>

                <!-- Filters -->
                <button id="clearZoneFiltersBtn" class="filter-btn">Clear Filters</button>

                <input type="text" 
                    id="zoneDateRange" 
                    placeholder="Select Date Range" 
                    class="filter-input" />

                <button id="clearZoneDateBtn" class="filter-btn">Clear</button>
            </div>

        </div>
        </header>

      <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        <div class="col-span-3 space-y-6">
          <div id="zoneSummaryTableContainer" class="bg-white/70 p-6 rounded-xl shadow">
            <p class="text-center text-gray-600">Loading zone summary data...</p>
          </div>

          <div class="bg-white/70 p-6 rounded-xl shadow h-80 flex items-center justify-center">
            <canvas id="zoneBarChart"></canvas>
          </div>

          <div id="zoneQuickStats" class="flex gap-6 text-sm text-gray-700"></div>
        </div>

        <div class="space-y-6 sticky top-24 self-start">
        <div class="bg-white/70 p-5 rounded-xl shadow">
            <h3 class="font-bold text-[#004c99] mb-3">Call Reason</h3>
            <div id="zoneReasonChips" class="flex flex-wrap gap-2 max-h-[500px] overflow-y-auto"></div>
        </div>
        </div>

      </div>
    </section>

    <!-- RURAL SECTION -->
    <section class="mb-10 border-b border-white/40">

        <header class="sticky top-0 z-50 bg-white/30 backdrop-blur-xl border border-white/40 shadow-lg rounded-2xl p-5 mb-8">
        <div class="flex flex-wrap items-center justify-between gap-4">
            <h2 class="text-xl font-bold text-[#004c99]">Rural Top 20 Zone Analysis</h2>

<div class="flex flex-wrap items-center gap-3">

   

    <input type="text" 
        id="ruralDateRange" 
        placeholder="Select Date Range" 
        class="filter-input" />

    <button id="clearRuralDateBtn" class="filter-btn">Clear</button>
</div>

        </div>
        </header>

      <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        <div class="col-span-3 space-y-6">
          <div id="ruralSummaryTableContainer" class="bg-white/70 p-6 rounded-xl shadow">
            <p class="text-center text-gray-600">Loading rural summary data...</p>
          </div>

          <div class="bg-white/70 p-6 rounded-xl shadow h-80 flex items-center justify-center">
            <canvas id="ruralZoneBarChart"></canvas>
          </div>

          <div id="ruralZoneQuickStats" class="flex gap-6 text-sm text-gray-700"></div>
        </div>

        <div class="space-y-6 sticky top-24 self-start">
        <div class="bg-white/70 p-5 rounded-xl shadow">
    <div class="flex items-center justify-between mb-3">
        <h3 class="font-bold text-[#004c99]">Call Reason</h3>
        <button id="clearRuralFiltersBtn" class="filter-btn">Clear Filters</button>
    </div>
            <div id="ruralZoneReasonChips" class="flex flex-wrap gap-2 max-h-[500px] overflow-y-auto"></div>
        </div>
        </div>

      </div>
    </section>

  </div>

  <!-- Flowbite JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <!-- Custom Scripts -->
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- app module (ES module) -->
  <script type="module" src="./app-b-git.js"></script>
  
</body>
</html>
